<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= trip.tripName %> - TreKathon</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* General Styling */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            margin: 0;
            padding: 0;
        }

        /* Header styling */
        header {
            background-color: #0a6d75;
            color: #fff;
            padding: 20px;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Auth buttons styling */
        .auth-buttons {
            display: flex;
            gap: 10px;
        }

        .auth-buttons .btn {
            background-color: #ffffff;
            color: #0a6d75;
            padding: 10px 20px;
            text-decoration: none;
            border: 2px solid #ffffff;
            border-radius: 5px;
            transition: background-color 0.3s, color 0.3s;
        }

        .auth-buttons .btn:hover {
            background-color: #0a6d75;
            color: #ffffff;
            border: 2px solid #ffffff;
        }

        .profile-icon-button {
            background-color: whitesmoke;
            border: 2px solid #ffffff;
            border-radius: 5px;
            padding: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .profile-icon-button:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .profile-icon {
            width: 40px;
            height: 40px;
        }

        /* Navigation styling */
        nav {
            background-color: #008b8b;
            padding: 10px 0;
        }

        nav ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        nav ul li {
            display: inline;
        }

        nav ul li a {
            color: #ffffff;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        nav ul li a:hover {
            background-color: #006666;
        }
        /* Profile Icon and Logout Button Styling */
.profile-menu {
    display: flex;
    align-items: center;
    gap: 10px; /* Space between icon and button */
}

.profile-icon {
    width: 40px; /* Size of the profile icon */
    height: 40px;
    border-radius: 50%; /* Makes the icon circular */
    cursor: pointer;
    transition: transform 0.3s ease;
}

.profile-icon:hover {
    transform: scale(1.1); /* Slight zoom effect on hover */
}

.logout-btn {
    background-color: #ffffff; /* White button */
    color: #0a6d75; /* Teal text */
    padding: 10px 20px;
    text-decoration: none;
    border: 2px solid #ffffff;
    border-radius: 5px;
    transition: background-color 0.3s, color 0.3s;
}

.logout-btn:hover {
    background-color: #0a6d75; /* Inverted colors on hover */
    color: #ffffff;
    border: 2px solid #ffffff;
}

        /* Trip detail section styling */
        .trip-detail {
            padding: 50px 20px;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin: 20px;
            text-align: center;
        }

        .trip-detail h2 {
            font-size: 36px;
            color: #007575;
            margin-bottom: 20px;
        }

        .trip-detail img {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .trip-detail p {
            font-size: 18px;
            margin: 10px 0;
        }

        .description {
            font-size: 16px;
            color: #555;
            margin-top: 20px;
        }

        /* Booking form styling */
        .booking-form {
            display: none;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin: 20px auto;
            max-width: 400px;
            text-align: left;
        }

        .booking-form h3 {
            font-size: 24px;
            color: #007575;
            margin-bottom: 20px;
        }

        .booking-form label {
            display: block;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .booking-form input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        /* Participant info section */
        .participant-info {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .participant-info input {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            width: 100%;
        }

        /* Button styling */
        .book-button {
            padding: 15px 25px;
            background-color: #0a6d75;
            color: #ffffff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 20px;
            font-size: 18px;
        }

        .book-button:hover {
            background-color: #005757;
        }

        /* Footer styling */
        footer {
            background-color: #0a6d75;
            color: #ffffff;
            text-align: center;
            padding: 20px 0;
        }

        .footer-container {
            display: flex;
            justify-content: space-around;
            padding: 20px 0;
        }

        .footer-section {
            flex: 1;
            margin: 0 20px;
        }

        .footer-section h4 {
            margin-bottom: 15px;
            font-size: 18px;
            color: #ffcc00;
        }

        .footer-section ul {
            list-style-type: none;
            padding: 0;
        }

        .footer-section ul li {
            margin-bottom: 10px;
        }

        .footer-section ul li a {
            color: #fff;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-section ul li a:hover {
            color: #ffcc00;
        }

        .social-media {
            display: flex;
            justify-content: flex-start;
        }

        .social-media li {
            margin-right: 10px;
        }

        footer p {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            color: #fff;
            background-color: #222;
            padding: 10px 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-container, .auth-buttons {
                flex-direction: column;
                align-items: center;
            }

            .trip-detail {
                margin: 20px;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <h1>TreKathon</h1>
            <div class="auth-buttons">
                <!-- Profile Icon as a button with inline details -->
                <div class="profile-menu">
                    <a href="/profile">
                    <button class="profile-icon-button" id="profileIconButton">
                        <img src="/profile_icon.png" alt="Profile" class="profile-icon">
                    </button>
                    </a>
                    <a href="/signout" class="btn logout-btn">Logout</a>
                </div>
            </div>
        </div>
    </header>

    <nav>
        <ul>
            <li><a href="/index">Home</a></li>
            <li><a href="/services">Services</a></li>
            <li><a href="/treking">Trekking</a></li>
            <li><a href="/hiking">Hiking</a></li>
            <li><a href="/camping">Camping</a></li>
            <li><a href="/mytrips">My Trips</a></li>
        </ul>
    </nav>

    <section class="trip-detail">
        <h2><%= trip.tripName %></h2>
        <img src="<%= trip.imageUrl %>" alt="<%= trip.tripName %>">
        <p><strong>Distance from Pune:</strong> <%= trip.distanceFromPune %> km</p>
        <p><strong>Start Date:</strong> <%= trip.startDate %></p>
        <p><strong>End Date:</strong> <%= trip.endDate %></p>
        <p id="pricePerPerson" data-value="<%= trip.price %>"><strong>Price:</strong> â‚¹<%= trip.price %></p>

        <div class="description">
            <p><strong></strong> <%- trip.tripDescription %></p>
        </div>
        <button class="book-button" onclick="toggleBookingForm()">Book Now</button>

        <div class="booking-form" id="bookingForm">
            <h3>Booking Form</h3>
            <form action="/booking_form" method="POST">
                <!-- Hidden input to hold vacancy -->
                <input type="hidden" id="vacancy" value="<%= vacany.Vaccancy %>">

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>

                <label for="mobile">Mobile Number:</label>
                <input type="tel" id="mobile" name="mobile" required>

                <label for="people">Number of People:</label>
                <input type="number" id="people" name="people" min="1" max="10" required onchange="generateParticipantFields(); calculateTotalAmount()">

                <div id="participantsContainer"></div>


                <!-- Total Amount Display -->
                <p><strong>Total Amount:</strong> â‚¹<span id="totalAmountas">0</span></p>
                <input type="hidden" name="totalAmount" id="totalAmount" >

                <button class="book-button" type="submit">Submit</button>
            </form>
        </div>
    </section>

   <!-- Footer with provided content -->
  <footer>
    <div class="footer-container">
        <div class="footer-section">
            <h4>About Us</h4>
            <ul>
                <li><a href="/story">Our Story</a></li>
                <li><a href="/mission">Mission & Vision</a></li>
                <li><a href="team">Our Team</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h4>Contact Us</h4>
            <ul>
                <li><a href="#">Email: info@trekathon.com</a></li>
                <li><a href="#">Phone: +123-456-7890</a></li>
                <li><a href="/contact">Contact Form</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h4>Follow Us</h4>
            <ul class="social-media">
                <li><a href="#">Facebook</a></li>
                <li><a href="#">Instagram</a></li>
                <li><a href="#">Twitter</a></li>
                <li><a href="#">YouTube</a></li>
            </ul>
        </div>
    </div>
    <p>&copy; 2024 TreKathon. All rights reserved.</p>
</footer>
    <script>
        // Toggle the visibility of the booking form
        function toggleBookingForm() {
            const form = document.getElementById('bookingForm');
            form.style.display = (form.style.display === 'block') ? 'none' : 'block';
        }

        // Generate participant fields based on the number of people entered
        function generateParticipantFields() {
            const numPeople = document.getElementById('people').value;
            const participantsContainer = document.getElementById('participantsContainer');
            participantsContainer.innerHTML = ''; // Clear any existing fields

            for (let i = 1; i <= numPeople; i++) {
                const participantDiv = document.createElement('div');
                participantDiv.classList.add('participant-info');

                const nameField = document.createElement('input');
                nameField.type = 'text';
                nameField.name = `participants[${i - 1}][name]`;
                nameField.placeholder = `Participant ${i} Name`;
                nameField.required = true;

                const ageField = document.createElement('input');
                ageField.type = 'number';
                ageField.name = `participants[${i - 1}][age]`;
                ageField.placeholder = `Participant ${i} Age`;
                ageField.min = 16;
                ageField.required = true;

                const genderField = document.createElement('select');
                genderField.name = `participants[${i - 1}][gender]`;
                genderField.required = true;

                const maleOption = document.createElement('option');
                maleOption.value = 'Male';
                maleOption.textContent = 'Male';

                const femaleOption = document.createElement('option');
                femaleOption.value = 'Female';
                femaleOption.textContent = 'Female';

                const otherOption = document.createElement('option');
                otherOption.value = 'Other';
                otherOption.textContent = 'Other';

                genderField.appendChild(maleOption);
                genderField.appendChild(femaleOption);
                genderField.appendChild(otherOption);

                participantDiv.appendChild(nameField);
                participantDiv.appendChild(ageField);
                participantDiv.appendChild(genderField);

                participantsContainer.appendChild(participantDiv);
            }
        }

        // Calculate and display total amount
        function calculateTotalAmount() {
            const numPeople = document.getElementById('people').value;
            const pricePerPerson = document.getElementById('pricePerPerson').getAttribute('data-value');
            console.log(pricePerPerson); // This will log the price value
            const totalAmount = numPeople * pricePerPerson;
            document.getElementById('totalAmount').textContent = totalAmount;
            document.getElementById('totalAmountas').textContent = totalAmount;
            var totalAmountInput = document.getElementById('totalAmount');
    
            // Set the value of the input element
            totalAmountInput.value = totalAmount;
        }

        

        // Check if the number of participants exceeds the available vacancy
        document.querySelector("form").addEventListener("submit", function(event) {
            const peopleCount = document.getElementById('people').value;
            const vacancy = document.getElementById('vacancy').value;

            console.log(peopleCount);
            console.log(vacancy);

            if (peopleCount >= vacancy) {
                event.preventDefault(); // Stop form submission
                alert(`Sorry, only ${vacancy}  spots are available. Please reduce the number of participants.`);
            }
        });
    </script>
</body>
</html>
